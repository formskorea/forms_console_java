<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.formskorea.console.mapper.dao.ApplicationMapper">
    <select id="getInfluncerInfo" parameterType="User" resultType="User">
        SELECT intSeq,
        strEmail,
        strPassword,
        strName,
        strMobile,
        strNikname,
        intSex,
        txtPermission,
        intLevel,
        intStatus,
        dateReg,
        dateEdit,
        intCompanySeq
        <if test="strPassword != null">
            , PASSWORD(#{strPassword}) as strPassword2
        </if>
        FROM TB_INFUENCER
        WHERE strEmail = #{strEmail}
    </select>

    <select id="getClientInfo" parameterType="User" resultType="User">
        SELECT intSeq,
        strEmail,
        strPassword,
        strName,
        strMobile,
        strNikname,
        intSex,
        txtPermission,
        intLevel,
        intStatus,
        dateReg,
        dateEdit,
        intCompanySeq
        <if test="strPassword != null">
            , PASSWORD(#{strPassword}) as strPassword2
        </if>
        FROM TB_CLIENT
        WHERE strEmail = #{strEmail}
    </select>

    <select id="getAdminInfo" parameterType="User" resultType="User">
        SELECT intSeq,
        strName,
        strEmail,
        strPassword,
        intLevel,
        intStatus,
        dateReg,
        dateEdit,
        txtPermission
        <if test="strPassword != null">
            , PASSWORD(#{strPassword}) as strPassword2
        </if>

        FROM TB_ADMIN
        WHERE strEmail = #{strEmail}
    </select>

    <select id="getCompany" parameterType="Company" resultType="Company">
        SELECT intSeq,
        strCompanyname,
        strHomepage,
        intLevel,
        strTelnum,
        strZipcode,
        strAddress,
        strZone,
        intStatus,
        dateReg,
        dateEdit
        FROM TB_COMPANY
        WHERE
        intSeq > 0
        <if test="intSeq != null and intSeq != 0">
            AND intSeq = #{intSeq}
        </if>
        <if test="strCompanyname != null and strCompanyname != ''">
            AND strCompanyname = #{strCompanyname}
        </if>
    </select>

    <insert id="setInfluncer" parameterType="User" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_INFUENCER (strEmail,
                                  strPassword,
                                  strName,
                                  strMobile,
                                  strNikname,
                                  intSex,
                                  txtPermission,
                                  intLevel,
                                  intStatus,
                                  intCompanySeq)
        VALUES (#{strEmail},
                PASSWORD(#{strPassword}),
                #{strName},
                #{strMobile},
                #{strNikname},
                #{intSex},
                #{txtPermission},
                #{intLevel},
                #{intStatus},
                #{intCompanySeq});
    </insert>

    <insert id="setClient" parameterType="User" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_CLIENT (strEmail,
                               strPassword,
                               strName,
                               strMobile,
                               strTelnum,
                               strNikname,
                               intSex,
                               txtPermission,
                               intLevel,
                               intStatus,
                               intCompanySeq)
        VALUES (#{strEmail},
                PASSWORD(#{strPassword}),
                #{strName},
                #{strMobile},
                #{strTelnum},
                #{strNikname},
                #{intSex},
                #{txtPermission},
                #{intLevel},
                #{intStatus},
                #{intCompanySeq});
    </insert>

    <insert id="setAdmin" parameterType="User" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_ADMIN (strName,
                              strEmail,
                              strPassword,
                              intLevel,
                              intStatus,
                              txtPermission)
        VALUES (#{strName},
                #{strEmail},
                PASSWORD(#{strPassword}),
                #{intLevel},
                #{intStatus},
                #{txtPermission});
    </insert>

    <insert id="setCompany" parameterType="Company" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_COMPANY (strCompanyname,
                                strHomepage,
                                intLevel,
                                strTelnum,
                                strZipcode,
                                strAddress,
                                strZone,
                                intStatus)
        VALUES (#{strCompanyname},
                #{strHomepage},
                #{intLevel},
                #{strTelnum},
                #{strZipcode},
                #{strAddress},
                #{strZone},
                #{intStatus});
    </insert>
</mapper>