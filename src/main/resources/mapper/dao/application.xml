<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.formskorea.console.mapper.dao.ApplicationMapper">
    <select id="getInfluncerInfo" parameterType="User" resultType="User">
        SELECT intSeq,
        strEmail,
        strPassword,
        strName,
        strMobile,
        strNikname,
        intSex,
        txtPermission,
        intLevel,
        intStatus,
        dateReg,
        dateEdit,
        intCompanySeq
        <if test="strPassword != null">
            , PASSWORD(#{strPassword}) as strPassword2
        </if>
        FROM TB_INFUENCER
        WHERE strEmail = #{strEmail}
    </select>

    <select id="getClientInfo" parameterType="User" resultType="User">
        SELECT intSeq,
        strEmail,
        strPassword,
        strName,
        strMobile,
        strNikname,
        intSex,
        txtPermission,
        intLevel,
        intStatus,
        dateReg,
        dateEdit,
        intCompanySeq
        <if test="strPassword != null">
            , PASSWORD(#{strPassword}) as strPassword2
        </if>
        FROM TB_CLIENT
        WHERE strEmail = #{strEmail}
    </select>

    <select id="getAdminInfo" parameterType="User" resultType="User">
        SELECT intSeq,
        strName,
        strEmail,
        strPassword,
        intLevel,
        intStatus,
        dateReg,
        dateEdit,
        txtPermission
        <if test="strPassword != null">
            , PASSWORD(#{strPassword}) as strPassword2
        </if>

        FROM TB_ADMIN
        WHERE strEmail = #{strEmail}
    </select>

    <select id="getCompany" parameterType="Company" resultType="Company">
        SELECT intSeq,
        strCompanyname,
        strHomepage,
        intLevel,
        strTelnum,
        strZipcode,
        strAddress,
        strZone,
        intStatus,
        dateReg,
        dateEdit
        FROM TB_COMPANY
        WHERE
        intSeq > 0
        <if test="intSeq != null and intSeq != 0">
            AND intSeq = #{intSeq}
        </if>
        <if test="strCompanyname != null and strCompanyname != ''">
            AND strCompanyname = #{strCompanyname}
        </if>
    </select>

    <insert id="setInfluncer" parameterType="User" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_INFUENCER (strEmail,
                                  strPassword,
                                  strName,
                                  strMobile,
                                  strNikname,
                                  intSex,
                                  txtPermission,
                                  intLevel,
                                  intStatus,
                                  intCompanySeq)
        VALUES (#{strEmail},
                PASSWORD(#{strPassword}),
                #{strName},
                #{strMobile},
                #{strNikname},
                #{intSex},
                #{txtPermission},
                #{intLevel},
                #{intStatus},
                #{intCompanySeq});
    </insert>

    <insert id="setClient" parameterType="User" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_CLIENT (strEmail,
                               strPassword,
                               strName,
                               strMobile,
                               strTelnum,
                               strNikname,
                               intSex,
                               txtPermission,
                               intLevel,
                               intStatus,
                               intCompanySeq)
        VALUES (#{strEmail},
                PASSWORD(#{strPassword}),
                #{strName},
                #{strMobile},
                #{strTelnum},
                #{strNikname},
                #{intSex},
                #{txtPermission},
                #{intLevel},
                #{intStatus},
                #{intCompanySeq});
    </insert>

    <insert id="setAdmin" parameterType="User" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_ADMIN (strName,
                              strEmail,
                              strPassword,
                              intLevel,
                              intStatus,
                              txtPermission)
        VALUES (#{strName},
                #{strEmail},
                PASSWORD(#{strPassword}),
                #{intLevel},
                #{intStatus},
                #{txtPermission});
    </insert>

    <update id="editInfluncer" parameterType="User">
        UPDATE TB_INFUENCER SET
        <if test="strPassword != null and strPassword != ''">
            strPassword = PASSWORD(#{strPassword}),
        </if>
        <if test="strName != null and strName != ''">
            strName = #{strName},
        </if>
        <if test="strMobile != null and strMobile != ''">
            strMobile = #{strMobile},
        </if>
        <if test="strNikname != null and strNikname != ''">
            strNikname = #{strNikname},
        </if>
        <if test="intSex != null and intSex != 0">
            intSex = #{intSex},
        </if>
        <if test="txtPermission != null and txtPermission != ''">
            txtPermission = #{txtPermission},
        </if>
        <if test="intLevel != null and intLevel != 0">
            intLevel = #{intLevel},
        </if>
        <if test="intStatus != null and intStatus != 0">
            intStatus = #{intStatus},
        </if>
        <if test="intCompanySeq != null and intCompanySeq != 0">
            intCompanySeq = #{intCompanySeq},
        </if>
        dateEdit = CURRENT_TIMESTAMP
        WHERE
        intSeq > 0
        <if test="intSeq != null and intSeq != 0">
            AND intSeq = #{intSeq}
        </if>
        <if test="strEmail != null and strEmail != ''">
            AND strEmail = #{strEmail}
        </if>
    </update>

    <update id="editClient" parameterType="User">
        UPDATE TB_CLIENT SET
        <if test="strPassword != null and strPassword != ''">
            strPassword = PASSWORD(#{strPassword}),
        </if>
        <if test="strName != null and strName != ''">
            strName = #{strName},
        </if>
        <if test="strMobile != null and strMobile != ''">
            strMobile = #{strMobile},
        </if>
        <if test="strNikname != null and strNikname != ''">
            strNikname = #{strNikname},
        </if>
        <if test="intSex != null and intSex != 0">
            intSex = #{intSex},
        </if>
        <if test="txtPermission != null and txtPermission != ''">
            txtPermission = #{txtPermission},
        </if>
        <if test="intLevel != null and intLevel != 0">
            intLevel = #{intLevel},
        </if>
        <if test="intStatus != null and intStatus != 0">
            intStatus = #{intStatus},
        </if>
        <if test="intCompanySeq != null and intCompanySeq != 0">
            intCompanySeq = #{intCompanySeq},
        </if>
        dateEdit = CURRENT_TIMESTAMP
        WHERE
        intSeq > 0
        <if test="intSeq != null and intSeq != 0">
            AND intSeq = #{intSeq}
        </if>
        <if test="strEmail != null and strEmail != ''">
            AND strEmail = #{strEmail}
        </if>
    </update>

    <update id="editAdmin" parameterType="User">
        UPDATE TB_CLIENT SET
        <if test="strPassword != null and strPassword != ''">
            strPassword = PASSWORD(#{strPassword}),
        </if>
        <if test="strName != null and strName != ''">
            strName = #{strName},
        </if>
        <if test="txtPermission != null and txtPermission != ''">
            txtPermission = #{txtPermission},
        </if>
        <if test="intLevel != null and intLevel != 0">
            intLevel = #{intLevel},
        </if>
        <if test="intStatus != null and intStatus != 0">
            intStatus = #{intStatus},
        </if>
        dateEdit = CURRENT_TIMESTAMP
        WHERE
        intSeq > 0
        <if test="intSeq != null and intSeq != 0">
            AND intSeq = #{intSeq}
        </if>
        <if test="strEmail != null and strEmail != ''">
            AND strEmail = #{strEmail}
        </if>
    </update>

    <insert id="setCompany" parameterType="Company" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_COMPANY (strCompanyname,
                                strHomepage,
                                intLevel,
                                strTelnum,
                                strZipcode,
                                strAddress,
                                strZone,
                                intStatus)
        VALUES (#{strCompanyname},
                #{strHomepage},
                #{intLevel},
                #{strTelnum},
                #{strZipcode},
                #{strAddress},
                #{strZone},
                #{intStatus});
    </insert>

    <insert id="setMedia" parameterType="Media" useGeneratedKeys="true" keyProperty="intSeq">
        INSERT INTO TB_MEDIA (intUserSeq, intUserType, intType, strURL, intStatus)
        VALUES (#{intUserSeq}, #{intUserType}, #{intType}, #{strURL}, #{intStatus});
    </insert>

    <select id="getMedia" parameterType="Media" resultType="Media">
        SELECT
            intSeq, intUserSeq, intUserType, intType, strURL, intStatus
        FROM
               TB_MEDIA
        WHERE
            intSeq > 0
        <if test="intSeq != null and intSeq != 0">
            AND intSeq = #{intSeq}
        </if>
        <if test="intUserType != null and intUserType != 0">
            AND intUserType = #{intUserType}
        </if>
        <if test="intUserSeq != null and intUserSeq != 0">
            AND intUserSeq = #{intUserSeq}
        </if>
    </select>
</mapper>